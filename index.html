<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
<div id="app" :class="bodyStyle">
    <div class="container">
        <form class="mt-3" @submit.prevent="submitForm">
            <div class="mb-3 col-4">
                <label for="name" class="form-label">Name:</label>
                <input class="form-control" id="name" v-model="firstName"/>
                <span class="form-text text-danger" v-if="message.firstName">{{message.firstName}}</span>
            </div>
            <div class="mb-3 col-4">
                <label for="lastName" class="form-label">Last Name:</label>
                <input class="form-control" id="lastName" v-model="lastName"/>
                <span class="form-text text-danger" v-if="message.lastName">{{message.lastName}}</span>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" id="man" value="man" v-model="sex">
                <label class="form-check-label" for="man">
                    Man
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" id="woman" value="woman" v-model="sex">
                <label class="form-check-label" for="woman">
                    Woman
                </label>
            </div>
            <span class="form-text text-danger" v-if="message.sex">{{message.sex}}</span>
            <div class="mt-3 mb-3 col-4">
                <label for="tel" class="form-label">Phone:</label>
                <input class="form-control" id="tel" v-model="tel"/>
                <span class="form-text text-danger" v-if="message.tel">{{message.tel}}</span>
            </div>
            <div class="mt-3 mb-3 col-4">
                <label for="nickName" class="form-label">Nickname:</label>
                <input class="form-control" id="nickName" v-model="nickName"/>
                <span class="form-text text-danger" v-if="message.nickName">{{message.nickName}}</span>
            </div>
            <button class="btn btn-success">Submit</button>
        </form>
    </div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.js"></script>
<script type="text/javascript">
    var app = new Vue({
        el: '#app',
        data: {
            firstName: null,
            lastName: null,
            sex: null,
            tel: null,
            nickName: null,
            message: [],
            bodyStyle: null,
            manStyle: 'bg-info',
            womanStyle: 'bg-danger',
            regexTel: /^\+380[(]{1}[0-9]{2}[)]{1}[0-9]{3}[-]{1}[0-9]{2}[-]{1}[0-9]{2}$/,
            regexNick: /[\S]*[A-Z]{1,}[\S]*[\_][\S]*[\d]{3}$/

        },

        watch: {
            firstName(value) {
                this.firstName = value
                this.validateFirstName(value)
            },
            lastName(value) {
                this.lastName = value
                this.validateLastName(value)
            },
            sex(value) {
                this.sex = value
                this.validateSex(value)
            },
            tel(value) {
                this.tel = value
                this.validateTel(value)
            },
            nickName(value) {
                this.nickName = value
                this.validateNick(value)
            },
        },
        methods: {
            validateFirstName(value) {
                if (value) {
                    this.message['firstName'] = ''
                } else {
                    this.message['firstName'] = 'Name is required'
                }
            },
            validateLastName(value) {
                if (value) {
                    this.message['lastName'] = ''
                } else {
                    this.message['lastName'] = 'Last Name is required'
                }
            },
            validateSex(value) {
                if (value === 'man') {
                    this.bodyStyle = this.manStyle
                } else if (value === 'woman') {
                    this.bodyStyle = this.womanStyle
                } else {
                    this.message['sex'] = 'Required'
                }
            },
            validateTel(value) {
                if (this.regexTel.test(value)) {
                    this.message['tel'] = ''
                } else {
                    this.message['tel'] = 'Required format +380(XX)XXX-XX-XX\n'
                }
            },
            validateNick(value) {
                if (this.regexNick.test(value)) {
                    this.message['nickName'] = ''
                } else {
                    this.message['nickName'] = 'Required 1 big letter, 1 underline, 3 numeric at the end\n'
                }
            },
            submitForm() {
                this.validateFirstName(this.firstName)
                this.validateLastName(this.lastName)
                this.validateSex(this.sex)
                this.validateTel(this.tel)
                this.validateNick(this.nickName)
                this.$forceUpdate();
            }
        },
    })
</script>
</html>